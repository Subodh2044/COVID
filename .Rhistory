scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
# panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
ggsave("ef.png")
ef <- df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
#panel.grid.major.x = element_blank(),
#panel.grid.minor.x  = element_blank(),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
ggsave("ef.png")
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
#panel.grid.major.x = element_blank(),
#panel.grid.minor.x  = element_blank(),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_rect(fill="black"),
panel.grid.minor.x  = element_blank(),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_rect(fill="black"),
panel.grid.minor.x  = element_blank(),
plot.background = element_line(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
plot.background = element_line(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_rect(fill="black"),
panel.grid.minor.x  = element_blank(),
plot.background = element_line(fill="black"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
ef <- df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_rect(fill="black"),
panel.grid.minor.x  = element_blank(),
plot.background = element_line(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
ef <- df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_rect(fill="black"),
panel.grid.minor.x  = element_blank(),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
ggsave("ef.png")
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_rect(fill="black"),
panel.grid.minor.x  = element_blank(),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
ef <- df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
ggsave("ef.png")
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
plot.background = element_rect(fill="gray"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="gray"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
panel.grid.major.y = element_line(color="red"),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="gray"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
panel.grid.major.y = element_line(color="red"),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
panel.grid.major.y = element_line(color="blue"),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_cases),color="black",fill="blue")+
geom_line(aes(x=date,y=Case_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Cases",
x="",
title = "Nepal COVID Cases",
subtitle = "New Cases and 7-day Moving Average",
caption = "John Hopkins University  \n black bars are new daily cases and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
panel.grid.major.y = element_line(color="blue"),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
eg <- df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_cases),color="black",fill="blue")+
geom_line(aes(x=date,y=Case_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Cases",
x="",
title = "Nepal COVID Cases",
subtitle = "New Cases and 7-day Moving Average",
caption = "John Hopkins University  \n black bars are new daily cases and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
panel.grid.major.y = element_line(color="blue"),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
ggsave("eg.png")
ef <- df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
panel.grid.major.y = element_line(color="blue"),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
ggsave("ef.png")
ef <- df %>%
filter(location=="Nepal") %>%
ggplot()+
geom_col(aes(x=date,y=new_deaths),color="black",fill="blue")+
geom_line(aes(x=date,y=Death_Moving_Average), lwd=1, color="red")+
scale_y_continuous(sec.axis = sec_axis(~./1, name = "Moving Average Cases"))+
scale_y_continuous(labels = comma)+
labs(y="Death",
x="",
title = "Nepal COVID Death Rate",
subtitle = "Daily deaths and 7-day average",
caption = "John Hopkins University  \n black bars are new daily death rate and red line is 7-day moving average")+
scale_x_date(date_breaks = "month" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90, size = 10),
panel.grid.major.x = element_blank(),
panel.grid.minor.x  = element_blank(),
panel.grid.major.y = element_line(color="blue"),
plot.background = element_rect(fill="white"),
panel.background = element_rect(fill="white"),
axis.text.y = element_text(size=10),
axis.title.x = element_text(size = 10),
axis.ticks.x=element_blank(),
plot.caption = element_text(face="bold.italic"))
ggsave("ef.png")
ggplotly(ef)
df$months <- month(df$date,label = TRUE)
df$Year<-year(df$date)
df$dates <- paste(df$months,df$Year,"1", sep="-")
df$dates <- myd(df$dates)
dff <- df %>%
filter(location %in% c("Nepal")) %>%
group_by(dates,location) %>%
summarise(Cases=sum(new_cases)) %>%
ggplot(aes(dates,Cases))+
geom_bar(stat="identity",fill="red")+
scale_y_continuous(label=comma)+
scale_x_date(date_breaks = "months" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90))
ggplotly(dff)
df$months <- month(df$date,label = TRUE)
df$Year<-year(df$date)
df$dates <- paste(df$months,df$Year,"1", sep="-")
df$dates <- myd(df$dates)
dff <- df %>%
filter(location %in% c("Nepal")) %>%
group_by(dates,location) %>%
summarise(Deaths=sum(new_deaths)) %>%
ggplot(aes(dates,Cases))+
geom_bar(stat="identity",fill="red")+
scale_y_continuous(label=comma)+
scale_x_date(date_breaks = "months" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90))
ggplotly(dff)
df$months <- month(df$date,label = TRUE)
df$Year<-year(df$date)
df$dates <- paste(df$months,df$Year,"1", sep="-")
df$dates <- myd(df$dates)
dff <- df %>%
filter(location %in% c("Nepal")) %>%
group_by(dates,location) %>%
summarise(Deaths=sum(new_deaths)) %>%
ggplot(aes(dates,Deaths))+
geom_bar(stat="identity",fill="red")+
scale_y_continuous(label=comma)+
scale_x_date(date_breaks = "months" , date_labels = "%b-%y")+
theme(axis.text.x = element_text(angle=90))
ggplotly(dff)
